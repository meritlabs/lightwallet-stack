<div 
  class="topbar-container" 
  ng-include="'views/includes/topbar.html'"
  ng-init="titleSection='Sell Bitcoin'; goBackToState = 'glidera'">
</div>


<div class="content glidera p20v" 
  ng-controller="sellGlideraController as sell">
  <div class="row">
    <div class="columns">

      <div ng-show="!sell.show2faCodeInput && !sell.success">
        <form name="sellPriceForm" 
          ng-submit="sell.get2faCode(index.glideraToken)" novalidate>
          <label>Amount in {{showAlternative ? 'USD' : 'BTC'}}</label>
          <div class="input">
            <input ng-show="!showAlternative" type="number" id="qty" 
            name="qty" ng-attr-placeholder="{{'Amount'|translate}}"
            ng-minlength="0.00000001" ng-maxlength="10000000000" 
            ng-model="qty" autocomplete="off" ng-change="sell.getSellPrice(index.glideraToken, {'qty': qty})">

            <input ng-show="showAlternative" type="number" id="fiat" 
            name="fiat" ng-attr-placeholder="{{'Amount'|translate}}" 
            ng-model="fiat" autocomplete="off" ng-change="sell.getSellPrice(index.glideraToken, {'fiat': fiat})">

            <a ng-show="!showAlternative" class="postfix" 
              ng-click="showAlternative = true; qty = null; sell.sellPrice = null">BTC</a>
            <a ng-show="showAlternative" class="postfix" 
              ng-click="showAlternative = false; fiat = null; sell.sellPrice = null">USD</a>
            <input class="button dark-gray outline round" 
            type="submit" value="Continue" ng-disabled="!sell.sellPrice.qty">
          </div>
        </form>
        <div class="text-gray size-12 m10b" ng-show="sell.sellPrice.qty">
          Sell 
          <span ng-show="qty">${{sell.sellPrice.subtotal}} {{sell.sellPrice.currency}} in Bitcoin</span> 
          <span ng-show="fiat">{{sell.sellPrice.qty}} BTC</span> 
          at ${{sell.sellPrice.price}} {{sell.sellPrice.currency}} 
        </div>
      </div>
      <div ng-show="sell.show2faCodeInput && !sell.success">
        <p class="text-center text-gray">
        The bitcoin amount of {{sell.sellPrice.qty}} will be immediately sent from your bitcoin
        wallet ({{index.walletName}}) to Glidera.
        </p>
        <p class="text-center text-gray">
        The total of ${{sell.sellPrice.subtotal}} {{sell.sellPrice.currency}} will be deposited 
        in your bank account in 4-6 business days.
        </p>
        <form name="sellForm" 
          ng-submit="sell.createTx(index.glideraToken, twoFaCode)" novalidate>
          <label>Enter 2FA Code</label>
            <input type="number" ng-model="twoFaCode" required>
            <input class="button dark-gray outline round" 
            type="submit" value="Sell Bitcoin">
        </form>
      </div>
      <div class="text-center" ng-show="sell.success">
        <h1>Sale complete</h1>
        <p class="text-gray">
        A transfer has been initiated to your bank account and should arrive in 4-6 business days.
        </p>

        <button class="outline dark-gray round expand"
          ng-click="$root.go('glidera')">Finish</button>
      </div>
    </div>
  </div>
</div>
<div class="extra-margin-bottom"></div>
