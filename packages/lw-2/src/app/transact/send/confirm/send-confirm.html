<ion-header>
  <ion-navbar color="secondary">
    <ion-title>Confirm</ion-title>
  </ion-navbar>
</ion-header>


<ion-content class="add-bottom-for-cta">
  <div class="list">
    <div class="item head">
      <div class="send-header-wrapper">
        <img src="img/icon-tx-sent-outline.svg">
        <div class="sending-label">
          <span translate>Sending</span>
        </div>
      </div>
      <div class="amount-label" *ngIf="txData">
        <div class="amount">{{txData.amountValueStr || '...'}}
          <span class="unit">{{txData.amountUnitStr}}</span>
        </div>
        <div class="alternative">{{txData.alternativeAmountStr || '...'}}</div>
      </div>
      <div class="amount-label" *ngIf="!txData">
          <div class="amount"><ion-spinner></ion-spinner>
            <span class="unit"><ion-spinner></ion-spinner></span>
          </div>
          <div class="alternative"><ion-spinner></ion-spinner></div>
        </div>
    </div>
    <div class="info">

      <div class="container-to" *ngIf="txData">
        <span class="label" translate>To</span>
        <span class="payment-proposal-to" *ngIf="!recipientType">
          <img src="img/icons/merit.svg">

          <div copy-to-clipboard="txData.toAddress" class="ellipsis">
            <span class="m15l size-14" *ngIf="txData.toName">{{displayName()}}</span>
          </div>
        </span>
        <div class="wallet" *ngIf="recipientType == 'wallet'">
          <i class="icon big-icon-svg">
            <i class="merit-icon-wallet" ></i>            
          </i>
          <div copy-to-clipboard="txData.toAddress" class="ellipsis">
            <span class="wallet-name">{{displayName()}}</span>
          </div>
        </div>
        <div *ngIf="recipientType == 'contact'" class="gravatar-contact toggle" (click)="toggleAddress()">
          <gravatar class="send-gravatar" [name]="txData.toName" height="30" width="30" [email]="toEmail"></gravatar>
          <span *ngIf="txData.toName">{{displayName()}}</span>
        </div>
      </div>
      <a class="container-from" *ngIf="wallet" (click)="selectWallet()">
        <span class="label" translate>From</span>
        <div class="wallet">
          <i class="icon big-icon-svg">
            <i class="merit-icon-wallet" ></i>
          </i>
          <div>{{wallet.name}}</div>
        </div>
        <div class="wallet" *ngIf="!wallet">
          <i class="icon big-icon-svg">
              <img src="../assets/img/wallet.svg" [style.background-color]="grey" class="bg" />
          </i>
          <div>...</div>
        </div>
        <i class="icon bp-arrow-right"></i>
      </a>
      <div class="item item-icon-right" *ngIf="wallet && txData" (click)="chooseFeeLevel(tx, wallet)">
        <span class="label" translate>Fee: {{txData.feeLevelName}}</span>
        <span class="m10l">{{txData.txp.feeStr || '...'}}</span>
        <span class="item-note m10l">
          <span>{{txData.txp.alternativeFeeStr || '...'}}&nbsp;
            <span class="fee-rate" *ngIf="txData.txp.feeRatePerStr"> &middot;
              <i class="ion-alert-circled warn" *ngIf="txData.txp.feeToHigh"></i> &nbsp;
              <span class="fee-rate" [class.warn]="txData.txp.feeToHigh" translate> {{txData.txp.feeRatePerStr}} of the sending amount </span>

            </span>
          </span>
        </span>
        <i class="icon bp-arrow-right"></i>
      </div>
      <div class="item item-icon-right" *ngIf="wallet && !txData" (click)="chooseFeeLevel(tx, wallet)">
          <span class="label" translate>Fee: <ion-spinner></ion-spinner></span>
          <span class="m10l"><ion-spinner></ion-spinner></span>
          <span class="item-note m10l">
            <span><ion-spinner></ion-spinner>&nbsp;
              <span class="fee-rate" *ngIf="txData.txp.feeRatePerStr"> &middot;
                <i class="ion-alert-circled warn" *ngIf="txData.txp.feeToHigh"></i> &nbsp;
                <span class="fee-rate" [class.warn]="txData.txp.feeToHigh" translate> <ion-spinner></ion-spinner> </span>
  
              </span>
            </span>
          </span>
          <i class="icon bp-arrow-right"></i>
        </div>
      <a class="item item-icon-right" *ngIf="wallet" (click)="showDescriptionPopup(tx)">
        <span class="label" translate>Add Memo</span>
        <span class="item-note m10l">
          {{txData.description}}
        </span>
        <i class="icon bp-arrow-right"></i>
      </a>
      <div class="text-center" *ngIf="noWalletMessage">
        <span class="badge badge-energized">{{noWalletMessage}}</span>
      </div>
    </div>
  </div>
  <button ion-button
    [disabled]="!wallet"
    class="click-to-accept__button button button-standard button-primary"
    [class.enter]="sendStatus"
    (click)="approve()">
    <span class="click-to-accept__status-text" ng-class="{enter: sendStatus}">
      <img src="img/spinner.png"> {{displaySendStatus}}
    </span>
  </button>
</ion-content>
