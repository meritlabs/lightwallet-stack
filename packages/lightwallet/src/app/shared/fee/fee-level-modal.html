<ion-header align-title="center" class="bar-royal">
  <ion-navbar>
    <ion-title>Merit Network Fee Policy </ion-title>
  </ion-navbar>
</ion-header>
<button ion-button [disabled]="customFeePerKB && !customMicrosPerByte.value" (click)="ok()">
  OK
</button>

<ion-content>
  <div class="box-notification warning" *ngIf="network!='livenet'">
    Testnet
  </div>
  <div class="row selected-fee-level" [hidden]="!feeLevel">
    <div class="col time" *ngIf="!customFeePerKB">
      <div class="value">
        <span *ngIf="avgConfirmationTime">
          {{avgConfirmationTime}}
        </span>
        <span *ngIf="loadingFee">...</span>
      </div>
      <span>Average confirmation time</span>
    </div>
    <div class="col rate" [ngClass]="{'separator': !customFeePerKB}">
      <div *ngIf="!customFeePerKB">
        <div class="value">
          <span *ngIf="feePerMicrosByte && !loadingFee">
            {{feePerMicrosByte}} micros/byte
          </span>
          <span *ngIf="loadingFee">...</span>
        </div>
        <span>Current fee rate for this policy</span>
      </div>
      <div *ngIf="customFeePerKB">
        <div class="list">
          <label class="item item-input">
            <ion-input type="number" placeholder="Enter custom fee" [min]="minFeeAllowed" [max]="maxFeeAllowed" [(ngModel)]="customMicrosPerByte.value"
              (ionChange)="checkFees($event)" [required]="customFeePerKB"></ion-input>
            <span class="unit">micros/byte</span>
          </label>
        </div>
        <div class="error-fee">
          <div *ngIf="showError">
            <i class="icon ion-close-circled"></i>
            <span>
              Transactions without fee are not supported.
            </span>
          </div>
          <div *ngIf="showMinWarning || showMaxWarning">
            <i class="icon ion-alert-circled"></i>
            <span *ngIf="showMinWarning">
              Your fee is lower than recommended.
            </span>
            <span *ngIf="showMaxWarning">
              You should not set a fee higher than {{maxFeeRecommended}} micros/byte.
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="list" [hidden]="!feeLevel">
    <label class="item item-input item-select">
      <div class="input-label">
        Fee level
      </div>
      <ion-item>
        <ion-label></ion-label>
        <ion-select [(ngModel)]="selectedFee.value">
          <ion-option *ngFor="let level of feeOptValues()" [value]="level">{{level}}</ion-option>
        </ion-select>
      </ion-item>
    </label>
  </div>

</ion-content>