<ion-header no-border>
  <ion-navbar>
    <ion-title></ion-title>
    <ion-buttons end>
      <button ion-button (click)="dismiss()">
        Close
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content>
  <div class="big-header" *ngIf="tx">
    <div class="date">{{ tx.time * 1000 | amDateFormat: 'DD MMM, hh:mma' }}</div>
    <div class="contact-info">
      <contact-avatar [contact]="isEasySend? tx.contact : null" [fallback]="'assets/img/icons/' + image + '.svg'"></contact-avatar>
      <h2 class="name">{{ tx.name }}</h2>
    </div>
    <div *ngIf="!tx.isWalletUnlock">
      <h2 class="amount" *ngIf="!(tx.isCoinbase && tx.isInvite)">
        {{ isCredit? '' : '-' }}{{tx.amountStr | toUnit : tx.amount}}&nbsp;<small>MRT</small>
      </h2>
      <h3 class="detail-fiat" *ngIf="!(tx.isCoinbase && tx.isInvite)">
        {{ isCredit? '' : '-' }}{{tx.alternativeAmountStr || altAmountStr | toFiat : tx.amount | async}}
      </h3>
      <p class="fee" *ngIf="!tx.isCoinbase">
        Fee {{ tx.feeStr + ' MRT' }}
      </p>
    </div>
  </div>

  <div *ngIf="tx">
    <ion-item *ngIf="tx.displayWallet">
      <ion-avatar img-icon item-start>
        <img src="assets/img/icons/wallet.svg" alt="">
      </ion-avatar>
      <ion-label>
        <p>{{ isCredit? 'Received to' : 'Sent from' }}</p>
        <h2>{{ tx.displayWallet.name }}</h2>
      </ion-label>
    </ion-item>
    <ion-item class="confirmation-status" [class.confirmed]="isConfirmed" text-wrap no-lines>
      <ion-avatar img-icon item-start>
        <img [src]="'assets/img/icons/' + (isConfirmed? 'done' : 'timeout') + '.svg'" alt="">
      </ion-avatar>
      <ion-label>
        <h2>{{ isConfirmed? 'Complete' : 'Awaiting confirmation' }}</h2>
        <p>{{ confirmations }}</p>
      </ion-label>
    </ion-item>
    <div class="info-box" *ngIf="!isConfirmed">
      You have money available, but it cannot be spent until it confirms on the blockchain.
      Wait some time. Usually 5-10 mins.
    </div>
  </div>
</ion-content>
