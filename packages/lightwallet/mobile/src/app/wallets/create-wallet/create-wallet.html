<ion-header no-border>
  <ion-navbar color="light">
    <ion-title>Create Personal Wallet</ion-title>
  </ion-navbar>
</ion-header>

<ion-content enter-to-next>

  <form [formGroup]="formData" (submit)="createWallet()">
    <ion-list>
      <ion-item-group>
        <ion-item>
          <ion-label stacked>
            <h2>Wallet name</h2>
          </ion-label>
          <ion-input placeholder="Family vacation funds" formControlName="walletName"></ion-input>
        </ion-item>

        <div class="alias-item">
          <ion-item>
            <ion-label stacked>
              <h2>
                Referrer address
              </h2>
            </ion-label>
            <ion-input placeholder="Paste it here" [class.address]="parentAddress.value.length > 20"
                       formControlName="parentAddress"></ion-input>
          </ion-item>
          <ion-spinner *ngIf="parentAddress.pending" color="primary"></ion-spinner>
          <p *ngIf="!parentAddress.pending && parentAddress.invalid" class="error-message">Invalid address or alias</p>
        </div>

        <div class="alias-item">
          <ion-item>
            <ion-label stacked>
              <h2>
                Address alias
                <!--<button ion-button clear (click)="showAliasTooltip()" class="tooltip-button">-->
                <!--<ion-icon name="ios-information-circle-outline"></ion-icon>-->
                <!--</button>-->
              </h2>
            </ion-label>
            <ion-input placeholder="Enter address alias" formControlName="alias"></ion-input>
          </ion-item>
          <ion-spinner *ngIf="alias.pending" color="primary"></ion-spinner>
          <p *ngIf="!alias.pending && alias.invalid" class="error-message">
            {{
            alias.hasError('InvalidFormat')? 'Invalid alias format' : alias.hasError('AliasInUse')? 'Alias already in use' : ''
            }}
          </p>
        </div>


        <ion-item (click)="selectColor()">
          <ion-label>
            <h2>Color</h2>
          </ion-label>
          <ion-note item-end class="wallet-color-indicator">
            <span [style.background]="formData.value.color"></span>
          </ion-note>
        </ion-item>

        <ion-item>
          <ion-label>
            <h2>Hide Balance</h2>
          </ion-label>
          <ion-toggle formControlName="hideBalance">
          </ion-toggle>
        </ion-item>
        <ion-item>
          <ion-label stacked>
            <h2>Password (optional)</h2>
          </ion-label>
          <ion-input type="text" class="password-input" placeholder="Enter spending password" formControlName="password"></ion-input>
        </ion-item>
        <ion-item [hidden]="!password.value">
          <ion-label stacked>
            <h2>Confirm password</h2>
          </ion-label>
          <ion-input type="text" class="password-input"  placeholder="Repeat your password" formControlName="repeatPassword"></ion-input>
        </ion-item>
        <ion-item class="warning" no-lines [hidden]="!password.value">
          <b>Warning</b> This password cannot be recovered. If the password is lost, there is no way you could recover
          your
          funds!
        </ion-item>
      </ion-item-group>

    </ion-list>

    <button ion-button type="submit" [disabled]="formData.pending || formData.invalid || formData.pristine" class="action-button">
      Create new wallet
    </button>
  </form>

</ion-content>
