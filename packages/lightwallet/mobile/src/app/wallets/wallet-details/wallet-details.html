<ion-header no-border [custom-header-color]="wallet.color">
  <ion-navbar>
    <ion-title smaller-title>
      {{ wallet.rootAlias ? '@' + wallet.rootAlias : wallet.name }}
    </ion-title>
    <ion-buttons end>
      <button ion-button icon-only navPush="EditWalletView" [navParams]="{ wallet: wallet }">
        <ion-icon name="settings" merit-icon></ion-icon>
        <ion-spinner [hidden]="!refreshing" class="refresh-spinner" color="light"></ion-spinner>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content no-bounce>

  <ion-refresher (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <div class="big-header" [style.background]="wallet.color" [class.default]="!wallet.color">
    <h2 class="amount">
      {{ wallet.balance.totalAmount | toMRT:null:true }} <small>MRT</small>
    </h2>
    <div *ngIf="wallet.balance.totalAmount != wallet.balance.spendableAmount" class="amount-available">
      <small>({{ wallet.balance.spendableAmount | toMRT:null:true }} available)</small>
    </div>
    <h3 class="detail-fiat">
        {{ wallet.balance.totalAmount | toFiat }}
    </h3>
    <div class="action-buttons">
      <div class="button-cell">
        <button ion-button (click)="deposit()">
          <span class="inner-container">
            <ion-icon name="md-add-circle"></ion-icon>
            <span>Deposit</span>
          </span>
        </button>
      </div>
      <div class="button-cell">
        <button ion-button (click)="send()">
          <span class="inner-container">
            <ion-icon name="ios-send"></ion-icon>
          <span>Send</span>
          </span>
        </button>
      </div>
    </div>
  </div>

  <ion-item-divider>
    History
  </ion-item-divider>

  <div class="no-transactions" [hidden]="!loading">
     Loading transactions history...
  </div>

  <transaction-history [transactions]="wallet.completeHistory"></transaction-history>

  <ion-infinite-scroll (ionInfinite)="loadMoreHistory($event)">
        <ion-infinite-scroll-content></ion-infinite-scroll-content>
  </ion-infinite-scroll>

</ion-content>
