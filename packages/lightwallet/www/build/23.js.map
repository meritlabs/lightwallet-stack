{"version":3,"sources":["../../src/app/utilities/import/import.module.ts","../../src/app/utilities/mnemonic/derivation-path.service.ts","../../src/app/utilities/import/import.ts"],"names":[],"mappings":"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","file":"23.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ImportView } from 'merit/utilities/import/import';\nimport { DerivationPathService } from \"merit/utilities/mnemonic/derivation-path.service\";\nimport { WalletService } from \"merit/wallets/wallet.service\";\nimport { MnemonicService } from \"merit/utilities/mnemonic/mnemonic.service\";\n\n@NgModule({\n  declarations: [\n    ImportView\n  ],\n  imports: [\n    IonicPageModule.forChild(ImportView),\n  ],\n  providers: [\n    DerivationPathService,\n    WalletService,\n    MnemonicService\n  ]\n})\nexport class ImportComponentModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/utilities/import/import.module.ts","import { Injectable } from '@angular/core';\n\n\n@Injectable()\nexport class DerivationPathService {\n\n  public getDefault() {\n    return \"m/44'/0'/0'\";\n  }\n\n  public getDefaultTestnet() {\n    return \"m/44'/1'/0'\";\n  }\n\n  public parse(str) {\n    var arr = str.split('/');\n\n    var ret:any = {};\n\n    if (arr[0] != 'm')\n      return false;\n\n    switch (arr[1]) {\n      case \"44'\":\n        ret.derivationStrategy = 'BIP44';\n        break;\n      case \"45'\":\n        return {\n          derivationStrategy: 'BIP45',\n          networkName: 'livenet',\n          account: 0,\n        }\n        break;\n      case \"48'\":\n        ret.derivationStrategy = 'BIP48';\n        break;\n      default:\n        return false;\n    };\n\n    switch (arr[2]) {\n      case \"0'\":\n        ret.networkName = 'livenet';\n        break;\n      case \"1'\":\n        ret.networkName = 'testnet';\n        break;\n      default:\n        return false;\n    };\n\n    var match = arr[3].match(/(\\d+)'/);\n    if (!match)\n      return false;\n    ret.account = +match[1]\n\n    return ret;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/utilities/mnemonic/derivation-path.service.ts","import { Component, ViewChild, ElementRef } from '@angular/core';\nimport { IonicPage, NavController, NavParams, LoadingController, ModalController, App  } from 'ionic-angular';\n\nimport { ConfigService } from \"merit/shared/config.service\";\nimport { BwcService } from \"merit/core/bwc.service\";\nimport { ToastConfig } from \"merit/core/toast.config\";\nimport { Logger } from \"merit/core/logger\";\nimport { ProfileService } from \"merit/core/profile.service\";\nimport { WalletService } from \"merit/wallets/wallet.service\";\nimport { MeritToastController } from \"merit/core/toast.controller\";\nimport { DerivationPathService } from \"merit/utilities/mnemonic/derivation-path.service\";\nimport { MnemonicService } from \"merit/utilities/mnemonic/mnemonic.service\";\n\n\n@IonicPage({\n  defaultHistory: ['OnboardingView']\n})\n@Component({\n  selector: 'view-import',\n  templateUrl: 'import.html',\n})\nexport class ImportView {\n\n  //public phraseView = 'ImportPhraseView';\n  //public fileView   = 'ImportFileView';\n  //public formGroup:FormGroup;\n\n  @ViewChild('fileInput') input:ElementRef;\n\n  public segment = 'phrase';\n  public formData = {\n    words: '',\n    phrasePassword: '',\n    derivationPath: '',\n    fromHardwareWallet: false,\n    testnetEnabled: false,\n    bwsUrl: '',\n    backupFile: null,\n    backupFileBlob:'',\n    filePassword: '',\n    network: '',\n    hasPassphrase: false\n  };\n\n  public loadFileInProgress = false;\n  private sjcl;\n\n  constructor(\n    private  navCtrl: NavController,\n    private bwcService:BwcService,\n    private config:ConfigService,\n    private toastCtrl:MeritToastController,\n    private logger:Logger,\n    private loadingCtrl:LoadingController,\n    private profileService:ProfileService,\n    private walletService:WalletService,\n    private derivationPathService:DerivationPathService,\n    private modalCtrl:ModalController,\n    private app:App,\n    private mnemonicService:MnemonicService\n  ) {\n\n    this.formData.bwsUrl = config.getDefaults().bws.url;\n    this.formData.network = config.getDefaults().network.name;\n    this.formData.derivationPath =\n      this.formData.network == 'livenet' ?\n      this.derivationPathService.getDefault() :\n      this.derivationPathService.getDefaultTestnet();\n      \n    this.sjcl = this.bwcService.getSJCL();\n  }\n\n  ionViewDidLoad() {\n  }\n\n  openScanner() {\n    let modal = this.modalCtrl.create('ImportScanView');\n    modal.onDidDismiss((data) => {\n      if (data) {\n        let parts = data.split('|');\n        this.formData.words = parts[1];\n        this.formData.network = parts[2];\n        this.formData.derivationPath = parts[3];\n        this.formData.hasPassphrase = parts[4];\n      }\n    });\n    modal.present();\n  }\n\n\n\n  openFilePicker() {\n    this.input.nativeElement.click();\n  }\n\n  fileChangeListener($event) {\n\n    this.formData.backupFile = $event.target.files[0];\n\n    let reader:any = new FileReader();\n    this.loadFileInProgress = true;\n    reader.onloadend = (loadEvent:any) => {\n       if (loadEvent.target.readyState == 2) { //DONE  == 2\n        this.loadFileInProgress = false;\n        this.formData.backupFileBlob = loadEvent.target.result;\n       }\n    };\n\n    reader.readAsText($event.target.files[0]);\n  }\n\n\n  importMnemonic() {\n\n\n    let loader = this.loadingCtrl.create({content: 'importingWallet'});\n    loader.present();\n    let  pathData = this.derivationPathService.parse(this.formData.derivationPath);\n    if (!pathData) {\n      return this.toastCtrl.create({message: 'Invalid derivation path',  cssClass: ToastConfig.CLASS_ERROR});\n    }\n    let opts:any = {\n      account: pathData.account,\n      networkName: pathData.networkName,\n      derivationStrategy: pathData.derivationStrategy\n    };\n\n    let importCall;\n    if (this.formData.words.indexOf('xprv') == 0 || this.formData.words.indexOf('tprv') == 0) {\n      importCall = this.profileService.importExtendedPrivateKey(this.formData.words, opts);\n    } else if (this.formData.words.indexOf('xpub') == 0 || this.formData.words.indexOf('tpub') == 0) {\n      opts.extendedPublicKey = this.formData.words;\n      importCall = this.profileService.importExtendedPublicKey(opts);\n    } else {\n      opts.passphrase = this.formData.phrasePassword;\n      importCall = this.mnemonicService.importMnemonic(this.formData.words, opts);\n    }\n\n    return importCall.then((wallet) => {\n      return this.processCreatedWallet(wallet, loader);\n    }).catch((err) => {\n      loader.dismiss();\n\n      let errorMsg = 'Failed to import wallet';\n      if (err && err.message) {\n        errorMsg = err.message\n      } else if (typeof err === 'string') {\n        errorMsg = err;\n      }\n\n      this.toastCtrl.create({\n        message: errorMsg,\n        cssClass: ToastConfig.CLASS_ERROR\n      }).present();\n    });\n\n  }\n\n  importBlob() {\n\n    let decrypted;\n    try {\n\n      decrypted = this.sjcl.decrypt(this.formData.filePassword, this.formData.backupFileBlob);\n\n    } catch (e) {\n\n      this.logger.warn(e);\n      return this.toastCtrl.create({\n        message: \"Could not decrypt file, check your password\",\n        cssClass: ToastConfig.CLASS_ERROR\n      }).present();\n    }\n\n    let loader = this.loadingCtrl.create({content: 'importingWallet'});\n    loader.present();\n\n    this.profileService.importWallet(decrypted, {bwsurl: this.formData.bwsUrl}).then((wallet) => {\n        this.processCreatedWallet(wallet, loader);\n    }).catch((err) => {\n      loader.dismiss();\n      this.logger.warn(err);\n      this.toastCtrl.create({\n        message: err,\n        cssClass: ToastConfig.CLASS_ERROR\n      }).present();\n    });\n\n\n  }\n\n  private processCreatedWallet(wallet, loader?) {\n     console.log('PROCESSING');\n    //this.walletService.updateRemotePreferences(wallet, {}).then(() => {\n    this.profileService.setBackupFlag(wallet.credentials.walletId);\n    if (loader) loader.dismiss();\n    this.app.getRootNav().setRoot('TransactView');\n    //});\n  }\n\n  setDerivationPath() {\n    this.formData.derivationPath = this.formData.testnetEnabled ? this.derivationPathService.getDefaultTestnet() : this.derivationPathService.getDefault();\n  }\n\n  mnemonicImportAllowed() {\n\n    let checkWords = (words) => {\n\n      let beginsWith = (str) => {\n        return (this.formData.words.indexOf(str) == 0);\n      };\n\n      if (beginsWith('xprv') || beginsWith('tprv') || beginsWith('xpub') || beginsWith('tpuv')) {\n        return true;\n      } else {\n        return !(this.formData.words.split(/[\\u3000\\s]+/).length % 3)\n      }\n\n    };\n\n    return (\n      this.formData.words && checkWords(this.formData.words)\n    )\n  }\n\n  fileImportAllowed() {\n    return (\n      !this.loadFileInProgress && this.formData.backupFileBlob && this.formData.filePassword\n    );\n  }\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/utilities/import/import.ts"],"sourceRoot":""}