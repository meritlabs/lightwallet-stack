{"version":3,"sources":["../../src/app/wallets/wallet-details/wallet-details.module.ts","../../src/app/shared/shared.module.ts","../../src/app/shared/to-unit.pipe.ts","../../src/app/shared/to-fiat.pipe.ts","../../src/app/wallets/wallet-details/wallet-details.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAyC;AACO;AACgC;AAIJ;AAC7B;AACc;AAGH;AAG1D;;EAEE;AAeF,IAAa,mBAAmB,GAAhC;CAAmC;AAAtB,mBAAmB;IAd/B,+DAAQ,CAAC;QACR,YAAY,EAAE;YACZ,sGAAiB;SAClB;QACD,OAAO,EAAE;YACP,sEAAe,CAAC,QAAQ,CAAC,sGAAiB,CAAC;YAC3C,6DAAY;YACZ,gFAAY;SACb;QACD,SAAS,EAAE;YACT,kGAAe;YACf,mFAAa;SACd;KACF,CAAC;GACW,mBAAmB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;AC/BS;AAEc;AACA;AACD;AAEtD,6CAA6C;AAc7C,IAAa,YAAY,GAAzB;CAA4B;AAAf,YAAY;IAbxB,+DAAQ,CAAC;QACR,YAAY,EAAE;YACZ,6EAAU;YACV,6EAAU;SACX;QACD,OAAO,EAAE,EACR;QACD,OAAO,EAAE;YACP,6EAAU;YACV,6EAAU;YACV,4EAAe;SAChB;KACF,CAAC;GACW,YAAY,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;ACpB2B;AACQ;AACO;AAGnE,IAAa,UAAU,GAAvB;IAGE,YACU,cAA6B,EAC7B,gBAAiC;QADjC,mBAAc,GAAd,cAAc,CAAe;QAC7B,qBAAgB,GAAhB,gBAAgB,CAAiB;QAEzC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC;IACrE,CAAC;IACD,SAAS,CAAC,KAAa,EAAE,QAAgB;QACvC,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;IACzD,CAAC;CACF;AAZY,UAAU;IADtB,2DAAI,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC;qCAKG,kFAAa;QACX,yFAAe;GALhC,UAAU,CAYtB;AAZsB;;;;;;;;;;;;;;;;;;;;;;;;ACL6B;AACQ;AACO;AAC/B;AAGpC,IAAa,UAAU,GAAvB;IAGE,YACU,cAA6B,EAC7B,gBAAiC;QADjC,mBAAc,GAAd,cAAc,CAAe;QAC7B,qBAAgB,GAAhB,gBAAgB,CAAiB;QAEzC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC;IACrE,CAAC;IACD,SAAS,CAAC,KAAa,EAAE,QAAgB;QACvC,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC,KAAY,EAAE,EAAE;YAChF,MAAM,CAAC,iDAAe,CAAC,KAAK,CAAC,CAAC;QAChC,CAAC,CAAC,CAAC;IACL,CAAC;CACF;AAdY,UAAU;IADtB,2DAAI,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC;qCAKG,kFAAa;QACX,yFAAe;GALhC,UAAU,CActB;AAdsB;;;;;;;;;;;;;;;;;;;;;;;;;ACNmB;AACe;AACI;AAElB;AAEf;AAQ5B,IAAa,iBAAiB,GAA9B;IAIE,YACS,OAAsB,EACtB,SAAoB,EACpB,aAA4B,EAC3B,MAAc;QAHf,YAAO,GAAP,OAAO,CAAe;QACtB,cAAS,GAAT,SAAS,CAAW;QACpB,kBAAa,GAAb,aAAa,CAAe;QAC3B,WAAM,GAAN,MAAM,CAAQ;QAEtB,mEAAmE;QACnE,mEAAmE;QACnE,qDAAqD;QACrD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAC3C,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,iCAAiC,CAAC,CAAC;QACpD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAChC,CAAC;IAED,gBAAgB;IAChB,CAAC;IAED,gBAAgB;QACd,IAAI,CAAC,gBAAgB,EAAE,CAAC;IAC1B,CAAC;IAED,cAAc;QACZ,mBAAmB;IACrB,CAAC;IAED,UAAU;QACR,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;IAC1C,CAAC;IAEO,gBAAgB,CAAC,QAAiB,KAAK;QAC7C,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,aAAa,EAAE,EAAE;YACpF,IAAI,CAAC,MAAM,CAAC,eAAe,GAAG,IAAI,CAAC,mBAAmB,CAAC,aAAa,CAAC,CAAC;QACxE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,GAAG,EAAE,EAAE;YACf,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACxB,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,mBAAmB,CAAC,EAAS;QACnC,EAAE,CAAC,CAAC,CAAC,+CAAS,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YACnB,MAAM,CAAC,2CAAK,CAAC,EAAE,EAAE,CAAC,CAAM,EAAE,EAAE;gBAC1B,EAAE,CAAC,CAAC,CAAC,6CAAO,CAAC,CAAC,CAAC,IAAI,CAAC,6CAAO,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;oBACtC,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;wBACjB,KAAK,MAAM;4BACT,EAAE,CAAC,CAAC,CAAC,CAAC,aAAa,IAAI,CAAC,CAAC,CAAC,CAAC;gCACzB,CAAC,CAAC,SAAS,GAAG,oBAAoB,CAAC;4BACrC,CAAC;4BAAC,IAAI,CAAC,CAAC;gCACN,CAAC,CAAC,SAAS,GAAG,cAAc,CAAC;4BAC/B,CAAC;4BACD,KAAK,CAAC;wBACR,KAAK,UAAU;4BACb,EAAE,CAAC,CAAC,CAAC,CAAC,aAAa,IAAI,CAAC,CAAC,CAAC,CAAC;gCACzB,CAAC,CAAC,SAAS,GAAG,sBAAsB,CAAC;4BACvC,CAAC;4BAAC,IAAI,CAAC,CAAC;gCACN,CAAC,CAAC,SAAS,GAAG,kBAAkB,CAAC;4BACnC,CAAC;4BACD,KAAK,CAAC;wBACR,KAAK,OAAO;4BACV,CAAC,CAAC,SAAS,GAAG,aAAa,CAAC;4BAC5B,KAAK,CAAC;wBACR;4BACE,CAAC,CAAC,SAAS,GAAG,oBAAoB,CAAC;4BACnC,KAAK;oBACT,CAAC;gBACH,CAAC;gBACD,MAAM,CAAC,CAAC,CAAC;YACX,CAAC,CAAC,CAAC;QACL,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,MAAM,CAAC,EAAE,CAAC;QACZ,CAAC;IACH,CAAC;IAED,gFAAgF;IAChF,2CAA2C;IACnC,yBAAyB;QAC/B,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAEO,aAAa,CAAC,EAAO;QAC3B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,eAAe,EAAE,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,QAAQ,EAAE,IAAI,EAAE,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC;IACpG,CAAC;IAED,cAAc;QACZ,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,gBAAgB,EAAE,EAAE,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;IAC/D,CAAC;CACF;AAxFY,iBAAiB;IAJ7B,gEAAS,CAAC;QACT,QAAQ,EAAE,qBAAqB;OACG;KACnC,CAAC;yEAM+B;QACX,mFAAS;QACL,mEAAa;QACnB,MAAM;AAgFzB;SAxFY,iBAAiB,gB","file":"14.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { WalletDetailsView } from 'merit/wallets/wallet-details/wallet-details';\nimport { TouchIdModule } from 'merit/shared/touch-id/touch-id.module';\nimport { TouchIdService } from 'merit/shared/touch-id/touch-id.service';\nimport { PopupService } from 'merit/core/popup.service';\nimport { MnemonicService } from 'merit/utilities/mnemonic/mnemonic.service';\nimport { MomentModule } from 'angular2-moment';\nimport { WalletService } from 'merit/wallets/wallet.service';\nimport { ToUnitPipe } from 'merit/shared/to-unit.pipe';\nimport { ToFiatPipe } from 'merit/shared/to-fiat.pipe';\nimport { SharedModule } from 'merit/shared/shared.module';\n\n\n/*\n  ToDo: Work to get this lazy-loadable as possible. \n*/\n@NgModule({\n  declarations: [\n    WalletDetailsView\n  ],\n  imports: [\n    IonicPageModule.forChild(WalletDetailsView),\n    MomentModule,\n    SharedModule\n  ],\n  providers: [\n    MnemonicService,\n    WalletService\n  ]\n})\nexport class WalletDetailsModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/wallets/wallet-details/wallet-details.module.ts","import { NgModule } from '@angular/core';\nimport { GravatarComponent } from 'merit/shared/gravatar.component';\nimport { ToUnitPipe } from 'merit/shared/to-unit.pipe';\nimport { ToFiatPipe } from 'merit/shared/to-fiat.pipe';\nimport { TranslateModule } from '@ngx-translate/core';\n\n// This module manaages the sending of money.\n@NgModule({\n  declarations: [\n    ToUnitPipe,\n    ToFiatPipe\n  ],\n  imports: [\n  ],\n  exports: [\n    ToUnitPipe,\n    ToFiatPipe,\n    TranslateModule\n  ]\n})\nexport class SharedModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/shared.module.ts","import { Pipe, PipeTransform } from '@angular/core';\nimport { ConfigService } from 'merit/shared/config.service';\nimport { TxFormatService } from 'merit/transact/tx-format.service';\n\n@Pipe({ name: 'toUnit' })\nexport class ToUnitPipe implements PipeTransform {\n  private unitCode: string;\n  \n  constructor(\n    private configProvider: ConfigService,\n    private txFormatProvider: TxFormatService\n  ) {\n    this.unitCode = this.configProvider.get().wallet.settings.unitCode;\n  }\n  transform(value: string, satoshis: number): any {\n    return this.txFormatProvider.formatAmountStr(satoshis);\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/to-unit.pipe.ts","import { Pipe, PipeTransform } from '@angular/core';\nimport { ConfigService } from 'merit/shared/config.service';\nimport { TxFormatService } from 'merit/transact/tx-format.service';\nimport * as Promise from 'bluebird';\n\n@Pipe({ name: 'toFiat' })\nexport class ToFiatPipe implements PipeTransform {\n  private unitCode: string;\n\n  constructor(\n    private configProvider: ConfigService,\n    private txFormatProvider: TxFormatService\n  ) { \n    this.unitCode = this.configProvider.get().wallet.settings.unitCode;\n  }\n  transform(value: string, satoshis: number): Promise<string> {\n    return this.txFormatProvider.formatAlternativeStr(satoshis).then((altSr:string) => {\n      return Promise.resolve(altSr);\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/shared/to-fiat.pipe.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { WalletService } from 'merit/wallets/wallet.service';\nimport { MeritWalletClient } from '../../../lib/merit-wallet-client/index';\nimport { Logger } from 'merit/core/logger';\n\nimport * as _ from 'lodash';\n\n\n@IonicPage({\n  segment: 'wallet/:walletId',\n  defaultHistory: ['WalletsView']\n})\n@Component({\n  selector: 'wallet-details-view',\n  templateUrl: 'wallet-details.html',\n})\nexport class WalletDetailsView {\n\n  public wallet: MeritWalletClient;\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public walletService: WalletService,\n    private logger: Logger\n  ) {\n    // We can assume that the wallet data has already been fetched and \n    // passed in from the wallets (list) view.  This enables us to keep\n    // things fast and smooth.  We can refresh as needed.\n    this.wallet = this.navParams.get('wallet');\n    this.logger.info(\"Inside the wallet-details view.\");\n    this.logger.info(this.wallet);\n  }\n\n  ionViewWillLeave() {\n  }\n\n  ionViewWillEnter() {\n    this.getWalletHistory();\n  }\n\n  ionViewDidLoad() {\n    //do something here\n  }\n\n  goToBackup() {\n    this.logger.info('not implemented yet');\n  }\n\n  private getWalletHistory(force: boolean = false): void {\n    this.walletService.getTxHistory(this.wallet, { force: force }).then((walletHistory) => {\n      this.wallet.completeHistory = this.formatWalletHistory(walletHistory);\n    }).catch((err) => {\n      this.logger.info(err);\n    });\n  }\n\n  private formatWalletHistory(wh: any[]): any[] {\n    if (!_.isEmpty(wh)) {\n      return _.map(wh, (h: any) => {\n        if (!_.isNil(h) && !_.isNil(h.action)) {\n          switch (h.action) {\n            case 'sent':\n              if (h.confirmations == 0) {\n                h.actionStr = 'Sending Payment...';\n              } else {\n                h.actionStr = 'Payment Sent';\n              }\n              break;\n            case 'received':\n              if (h.confirmations == 0) {\n                h.actionStr = 'Receiving Payment...';\n              } else {\n                h.actionStr = 'Payment Received';\n              }\n              break;\n            case 'moved':\n              h.actionStr = 'Moved Merit';\n              break;\n            default:\n              h.actionStr = 'Recent Transaction';\n              break\n          }\n        }\n        return h;\n      });\n    } else {\n      return [];\n    }\n  }\n\n  // Belt and suspenders check to be sure that the total number of TXs on the page\n  // add up to the total balance in status.  \n  private txHistoryInSyncWithStatus(): boolean {\n    return true;\n  }\n\n  private goToTxDetails(tx: any) {\n    this.navCtrl.push('TxDetailsView', { walletId: this.wallet.credentials.walletId, txId: tx.txid });\n  }\n\n  goToEditWallet() {\n    this.navCtrl.push('EditWalletView', { wallet: this.wallet });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/wallets/wallet-details/wallet-details.ts"],"sourceRoot":""}